pipeline {
agent { 'slave1' }
stages {
stage ('Build'){
steps { 
sh 'npm i'
sh 'ng build --prod'
 }
}
stage ('Dockerimage'){
steps {
sh 'docker build . -t myapp'
sh 'docker run -d --name myapp -p 8081:80 myapp'
 }
}
stage ('performance'){
steps {
sh 'npm install lighthouse'
sh 'lighthouse http://54.74.221.227:8081/ --chrome-flags="--headless"'
}
}
}
 }
